@using AntDesign
@using MamasRezepte.Shared.Models
@inject NavigationManager NavigationManager
@inject HttpClient HttpClient

@if(!FLoading)
{
    <Card Hoverable Style="width: 150px; border-radius: 2%;" Cover="@FImage">
        <CardMeta Title="@Recipe.Name" Description="@Recipe.Subtitle" />
    </Card>
} else
{
    <Skeleton Loading="true"></Skeleton>
}


@code {
    [Parameter]
    public Recipe Recipe { get; set; }

    private string FLinkToRecipe { get; set; }
    private RenderFragment FImage { get; set; }

    private bool FLoading = true;

    protected override async Task OnInitializedAsync()
    {
        Recipe.Images = (await HttpClient.GetFromJsonAsync<IEnumerable<RecipeImage>>("/api/RecipeImages")).Where(_ => _.RecipeId == Recipe.Id);
        var hImageSource = String.Format("data:image/jpeg;base64,{0}", Recipe.Images.First().ImageData);
        FImage =@<img width="150" alt="image" src="@hImageSource" />;

        FLoading = false;
    }
}
